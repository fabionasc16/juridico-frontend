"use strict";(self["webpackChunkjuridico_frontend"]=self["webpackChunkjuridico_frontend"]||[]).push([[740],{9143:function(e,s,t){t.d(s,{Z:function(){return d}});var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("b-modal",{attrs:{id:"modal-excluir",title:"Excluir","hide-footer":""}},[t("p",{staticClass:"my-4"},[e._v("Deseja excluir "+e._s(e.pergunta)+"?")]),t("b-button",{staticClass:"mr-2",on:{click:function(s){return e.$bvModal.hide("modal-excluir")}}},[e._v("Fechar")]),e._t("buttons")],2)],1)},o=[],i=t(8935),r=i["default"].extend({props:["pergunta"],methods:{}}),l=r,n=t(1001),c=(0,n.Z)(l,a,o,!1,null,null,null),d=c.exports},8887:function(e,s,t){t.r(s),t.d(s,{default:function(){return w}});var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"container fluid"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12",staticStyle:{"margin-top":"20px"}},[t("b-form-group",{staticClass:"titulo m-0",attrs:{label:"Consulta de Responsáveis","label-size":"lg"}},[t("hr")])],1)]),t("notifications",{attrs:{notifications:e.Notificacao}}),e.alert?t("div",[t("ReturnMessage",{attrs:{message:e.Message,fechaAlert:e.fechaAlert}})],1):e._e(),e.loading?t("div",[t("LoadingSpinner")],1):e._e(),t("b-form",{staticClass:"mb-5",on:{submit:function(s){return s.preventDefault(),e.search.apply(null,arguments)}}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-3"},[t("b-form-group",{staticClass:"font",attrs:{label:"CPF:"}},[t("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:"###.###.###-##",expression:"'###.###.###-##'"}],attrs:{placeholder:"Digite seu CPF ",type:"text"},model:{value:e.form.cpf_responsavel,callback:function(s){e.$set(e.form,"cpf_responsavel",s)},expression:"form.cpf_responsavel"}})],1)],1),t("div",{staticClass:"col-4"},[t("b-form-group",{staticClass:"font",attrs:{label:"Nome:"}},[t("b-form-input",{attrs:{placeholder:"Digite seu Nome",type:"text"},model:{value:e.form.nome_responsavel,callback:function(s){e.$set(e.form,"nome_responsavel",s)},expression:"form.nome_responsavel"}})],1)],1),t("div",{staticClass:"col-2 justify-content-center"},[t("b-form-group",{staticClass:"font text-white",attrs:{label:"Consultar"}},[t("b-button",{staticClass:"h2",attrs:{type:"submit"}},[t("b-icon-search",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.topleft",value:"Consultar",expression:"'Consultar'",modifiers:{hover:!0,topleft:!0}}]})],1)],1)],1)])]),t("div",{staticClass:"card p-0 m-0"},[t("div",{staticClass:"card-header",attrs:{align:"right"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-1 text-blue h2 p0m0",attrs:{align:"center",label:"Responsáveis Cadastrados"}},[t("b-icon-journal-text")],1),e._m(0),t("div",{staticClass:"col-1 position-relative",attrs:{align:"center"}},[t("b-form-group",{staticClass:"btn text-primary position-absolute top-50 start-50 translate-middle",attrs:{label:""}},[t("div",{staticClass:"h3"},[t("b-icon-plus-circle",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-cadastro-responsavel",modifiers:{"modal-cadastro-responsavel":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover.topleft",value:"Adicionar Responsável",expression:"'Adicionar Responsável'",modifiers:{hover:!0,topleft:!0}}],staticClass:"mr-3"})],1)])],1)])]),t("div",[t("b-table-lite",{staticClass:"m-0",attrs:{small:"",striped:"",hover:"","head-variant":"dark","current-page":e.currentPage,"per-page":e.perPage,"no-border-collapse":e.noCollapse,items:e.items,fields:e.fields},scopedSlots:e._u([{key:"cell(botaoAction)",fn:function(s){return[t("b-dropdown",{staticClass:"p0m0",attrs:{variant:"dark",size:"sm"},scopedSlots:e._u([{key:"button-content",fn:function(){return[e._v(" ≡"),t("span",{staticClass:"sr-only"})]},proxy:!0}],null,!0)},[t("b-list-group-item",{staticClass:"btn-light btn-outline-dark m-0 p-1",attrs:{block:""},on:{click:function(t){return e.editarResponsavel(s.item.id_responsavel)}}},[e._v(" Editar ")]),t("b-list-group-item",{staticClass:"btn-light btn-outline-dark m-0 p-1",attrs:{block:""},on:{click:function(t){return e.visualizarResponsavel(s.item.id_responsavel)}}},[e._v(" Visualizar ")]),t("b-list-group-item",{staticClass:"btn-light text-dark btn-outline-danger m-0 p-1",attrs:{block:""},on:{click:function(t){return e.abrirModal("modal-excluir",s.item.id_responsavel,s.item.nome_responsavel)},listarResponsaveis:function(s){return e.listarResponsaveis(e.currentPage)}}},[e._v(" Excluir ")])],1)]}}])})],1),t("div",{staticClass:"card-footer m-0 px-1 pt-1"},[t("div",{staticClass:"col-12 m-0 px-1 pt-1"},[t("b-pagination",{directives:[{name:"show",rawName:"v-show",value:e.totalRows,expression:"totalRows"}],attrs:{pills:"",align:"right",size:"sm","total-rows":e.totalRows,"per-page":e.perPage},on:{change:e.listarResponsaveis},model:{value:e.currentPage,callback:function(s){e.currentPage=s},expression:"currentPage"}})],1)]),t("div",[e._v("  "),t("b",[e._v("Total Registros:")]),e._v(" "+e._s(e.totalRows))])]),t("b-modal",{attrs:{id:"modal-cadastro-responsavel",size:"lg",centered:"",title:"Cadastro do Responsável","hide-footer":""}},[t("ModalCadastroResponsavel",{attrs:{tipo:"cadastrar"},on:{listarResponsaveis:function(s){return e.listarResponsaveis(e.currentPage)}},scopedSlots:e._u([{key:"buttons",fn:function(){return[t("b-button",{staticClass:"bordered",on:{click:function(s){return e.$bvModal.hide("modal-cadastro-responsavel")}}},[e._v("Fechar")])]},proxy:!0}])})],1),t("b-modal",{attrs:{id:"modal-editar-responsavel",size:"lg",centered:"",title:"Editar Responsável","hide-footer":""}},[t("ModalCadastroResponsavel",{attrs:{tipo:"editar",id:e.idResponsavel},on:{listarResponsaveis:function(s){return e.listarResponsaveis(e.currentPage)}},scopedSlots:e._u([{key:"buttons",fn:function(){return[t("b-button",{staticClass:"bordered",on:{click:function(s){return e.$bvModal.hide("modal-editar-responsavel")}}},[e._v("Fechar")])]},proxy:!0}])})],1),t("b-modal",{attrs:{id:"modal-visualizar-responsavel",size:"lg",centered:"",title:"Visualizar Responsável","hide-footer":""}},[t("ModalCadastroResponsavel",{attrs:{tipo:"visualizar",id:e.idResponsavel},scopedSlots:e._u([{key:"buttons",fn:function(){return[t("b-button",{staticClass:"bordered",on:{click:function(s){return e.$bvModal.hide("modal-visualizar-responsavel")}}},[e._v("Fechar")])]},proxy:!0}])})],1),t("ModalExcluir",{attrs:{pergunta:"o responsável "+e.nomeResponsavelModal},scopedSlots:e._u([{key:"buttons",fn:function(){return[t("b-button",{staticClass:"bordered",attrs:{variant:"danger"},on:{click:function(s){return e.excluir(e.idResponsavel)}}},[e._v("Excluir")])]},proxy:!0}])})],1)},o=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"col-10 mt-1",attrs:{align:"start"}},[t("div",{staticClass:"row position-relative"},[t("h5",[e._v("Responsáveis Cadastrados")])])])}],i=t(8935),r=t(784),l=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticClass:"card"},[t("div",{staticClass:"col-12"},[t("notifications",{attrs:{notifications:e.Notificacao}}),e.alert?t("div",[t("ReturnMessage",{attrs:{message:e.Message,fechaAlert:e.fechaAlert}})],1):e._e(),e.loading?t("div",[t("LoadingSpinner")],1):e._e(),t("b-form",{on:{submit:function(s){return s.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"row mt-3"},[t("b-form-group",{staticClass:"font col-sm-5 col-md-5 col-lg-5"},[t("label",[e._v("CPF"),t("span",{staticClass:"text-danger"},[e._v("*")]),e._v(":")]),t("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:"###.###.###-##",expression:"'###.###.###-##'"}],attrs:{placeholder:"Digite seu CPF ",type:"text",required:"",disabled:e.disabledAll},model:{value:e.form.cpfResponsavel,callback:function(s){e.$set(e.form,"cpfResponsavel",s)},expression:"form.cpfResponsavel"}})],1),t("b-form-group",{staticClass:"font col-sm-7 col-md-7 col-lg-7"},[t("label",[e._v("Nome completo"),t("span",{staticClass:"text-danger"},[e._v("*")]),e._v(":")]),t("b-form-input",{attrs:{placeholder:"Digite seu Nome Completo",type:"text",required:"",disabled:e.disabledAll},model:{value:e.form.nomeResponsavel,callback:function(s){e.$set(e.form,"nomeResponsavel",s)},expression:"form.nomeResponsavel"}})],1)],1),t("div",{staticClass:"row"},[t("b-form-group",{staticClass:"font col-sm-5 col-md-5 col-lg-5"},[t("label",[e._v("Telefone"),t("span",{staticClass:"text-danger"},[e._v("*")]),e._v(":")]),t("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:"(##) #####-####",expression:"'(##) #####-####'"}],attrs:{placeholder:"(00) 00000-0000",type:"text",required:"",disabled:e.disabledAll},model:{value:e.form.telefone,callback:function(s){e.$set(e.form,"telefone",s)},expression:"form.telefone"}})],1),t("b-form-group",{staticClass:"font col-sm-7 col-md-7 col-lg-7"},[t("label",[e._v("Email"),t("span",{staticClass:"text-danger"},[e._v("*")]),e._v(":")]),t("b-form-input",{attrs:{placeholder:"Digite seu Email",type:"email",required:"",disabled:e.disabledAll},model:{value:e.form.email,callback:function(s){e.$set(e.form,"email",s)},expression:"form.email"}})],1)],1),t("div",{staticClass:"row"},[t("b-form-group",{staticClass:"font col-sm-5 col-md-5 col-lg-5"},[t("label",[e._v("Registro OAB:"),t("span",{staticClass:"text-danger"},[e._v("*")]),e._v(":")]),t("b-form-input",{attrs:{placeholder:"Digite seu Registro OAB",type:"text",required:"",disabled:e.disabledAll},model:{value:e.form.registroOAB,callback:function(s){e.$set(e.form,"registroOAB",s)},expression:"form.registroOAB"}})],1)],1),t("div",{staticClass:"py-2 mt-10",attrs:{align:"right"}},[e._t("buttons"),e.disabledAll?e._e():t("b-button",{staticClass:"bordered ml-2",attrs:{type:"submit",variant:"success"}},[e._v("Salvar")])],2)])],1)])])},n=[],c=t(8161),d=t(9728),p=t(7054),u=t(4753),m=t(2210),v=t(3403),f=t(355),h=i["default"].extend({directives:{mask:c.mask},mixins:[f.Z],components:{HeaderPage:r.Z,BIconSearch:p.Lln,BIconJournalPlus:p.Wf7,BIconPlusCircle:p.HON,BIconInfoCircle:p.gjx,Notifications:d.Z,ReturnMessage:u.Z,LoadingSpinner:v.Z},props:["id","tipo"],data(){return{disabledAll:!1,rows:100,currentPage:1,stickyHeader:!0,noCollapse:!0,show:!1,form:{},Notificacao:[],Message:[],loading:!1,alert:!1,isLoading:!1}},mounted(){this.isLoading=!1,"editar"==this.tipo&&this.carregarDados(),"visualizar"==this.tipo&&(this.carregarDados(),this.disabledAll=!0)},methods:{submit(){let e=this.id?"put":"post",s="responsaveis";this.validarCampos()?(console.log("JSON: ",JSON.stringify(this.form)),this.loading=!0,m.Z.salvar(s,this.form,e,this.form.idResponsavel).then((s=>{"put"==e?this.adicionarAlert("success","Atualização realizada com sucesso!"):this.adicionarAlert("success","Cadastro realizado com sucesso!")})).catch((e=>{"Network Error"===e.message?this.adicionarAlert("alert","Sem conexão de rede. Verifique sua conexão!"):e&&e.response&&e.response.data&&e.response.data.message?this.adicionarAlert("alert",e.response.data.message):this.adicionarAlert("alert","Houve um erro ao salvar. Verifique o formulário e tente novamente!")})).finally((()=>{this.loading=!1}))):this.adicionarAlert("alert","Realize as validações exibidas no topo desta página!")},carregarDados(){this.loading=!0,m.Z.get("responsaveis/id",this.id).then((e=>{this.form.idResponsavel=e.data.id_responsavel,this.form.nomeResponsavel=e.data.nome_responsavel,this.form.cpfResponsavel=e.data.cpf_responsavel,this.form.telefone=e.data.telefone,this.form.email=e.data.email,this.form.registroOAB=e.data.registro_oab})).catch((e=>{this.adicionarAlert("alert","Houve um erro ao carregar os dados. Tente novamente!")})).finally((()=>{this.loading=!1}))},validarCampos(){return this.Notificacao=[],this.form.nomeResponsavel||this.adicionarNotificacao("danger","Nome é obrigatório!"),this.form.cpfResponsavel||this.adicionarNotificacao("danger","CPF é obrigatório!"),this.form.cpfResponsavel&&!f.Z.methods.validarCpf(this.form.cpfResponsavel)&&this.adicionarNotificacao("danger","CPF inválido!"),!(this.Notificacao.length>0)||(window.scrollTo(0,0),this.adicionarAlert("alert","Realize as validações exibidas no topo desta página!"),setTimeout((()=>{this.Notificacao=[]}),1e4),!1)},adicionarAlert(e,s){this.Message=[],this.Message.push({type:e,message:s}),this.alert=!0},adicionarNotificacao(e,s){this.Notificacao.push({type:e,message:s})},fechaAlert(){this.alert=!1,"success"==this.Message[0].type&&(this.$bvModal.hide("modal-cadastro-responsavel"),this.$bvModal.hide("modal-editar-responsavel"),this.$emit("listarResponsaveis"))}}}),g=h,b=t(1001),C=(0,b.Z)(g,l,n,!1,null,null,null),_=C.exports;const R=[{key:"botaoAction",label:"Ações",sortable:!1},{key:"nome_responsavel",label:"Nome",sortable:!0},{key:"cpf_responsavel",label:"CPF",sortable:!0}];var x=t(9143),k=i["default"].extend({directives:{mask:c.mask},components:{HeaderPage:r.Z,BIconSearch:p.Lln,BIconJournalText:p.kEx,BIconPlusCircle:p.HON,BIconInfoCircle:p.gjx,Notifications:d.Z,ModalCadastroResponsavel:_,ReturnMessage:u.Z,LoadingSpinner:v.Z,ModalExcluir:x.Z},data(){return{idResponsavel:null,nomeResponsavelModal:"",rows:100,currentPage:1,totalRows:null,perPage:10,items:[],pageOptions:[5,10,15,{value:100,text:"Show a lot"}],form:{},fields:R,stickyHeader:!0,noCollapse:!0,Notificacao:[],Message:[],loading:!1,alert:!1}},mounted(){this.listarResponsaveis(this.currentPage)},methods:{abrirModal(e,s,t){this.idResponsavel=s,this.nomeResponsavelModal=t,this.$bvModal.show(e)},editarResponsavel(e){this.idResponsavel=e,this.$bvModal.show("modal-editar-responsavel")},visualizarResponsavel(e){this.idResponsavel=e,this.$bvModal.show("modal-visualizar-responsavel")},listarResponsaveis(e){this.loading=!0;let s={};m.Z.post3("responsaveis/list",`?currentPage=${e}`,s).then((e=>{this.items=e.data.data,this.perPage=e.data.perPage,this.totalRows=e.data.total})).catch((e=>(console.log(e),this.Notificacao.push({type:"danger",message:"Não foi possível carregar a listagem!"}),!1))).finally((()=>{this.loading=!1}))},search(){const e=this.form.cpf_responsavel?this.form.cpf_responsavel.replace(/[^\d]+/g,""):"";let s={cpfResponsavel:e,nomeResponsavel:this.form.nome_responsavel?this.form.nome_responsavel:""};console.log("busca ",JSON.stringify(s)),m.Z.post("responsaveis/list",s).then((e=>{this.items=e.data.data,this.perPage=e.data.perPage,this.totalRows=e.data.total})).catch((e=>{if(e.message.length>0)return this.Notificacao.push({type:"danger",message:e.response.data.message}),!1})).finally((()=>{this.loading=!1}))},excluir(e){this.$bvModal.hide("modal-excluir"),m.Z["delete"]("responsaveis",e).then((e=>{this.loading=!0,this.adicionarAlert("success","Exclusão realizada com sucesso!"),this.listarResponsaveis(this.currentPage)})).catch((e=>{this.adicionarAlert("alert","Ocorreu um erro ao excluir registro!")})).finally((()=>{this.loading=!1}))},adicionarAlert(e,s){this.Message=[],this.Message.push({type:e,message:s}),this.alert=!0},adicionarNotificacao(e,s){this.Notificacao.push({type:e,message:s})},fechaAlert(){this.alert=!1}}}),y=k,A=(0,b.Z)(y,a,o,!1,null,null,null),w=A.exports},355:function(e,s){const t={methods:{validarCpf(e){if("string"!=typeof e)return!1;if(e=e.replace(/[^\d]+/g,""),""==e)return!1;if(11!=e.length||"00000000000"==e||"11111111111"==e||"22222222222"==e||"33333333333"==e||"44444444444"==e||"55555555555"==e||"66666666666"==e||"77777777777"==e||"88888888888"==e||"99999999999"==e)return!1;let s=0;for(let a=0;a<9;a++)s+=parseInt(e.charAt(a))*(10-a);let t=11-s%11;if(10!=t&&11!=t||(t=0),t!=parseInt(e.charAt(9)))return!1;s=0;for(let a=0;a<10;a++)s+=parseInt(e.charAt(a))*(11-a);return t=11-s%11,10!=t&&11!=t||(t=0),t==parseInt(e.charAt(10))}}};s["Z"]=t}}]);
//# sourceMappingURL=740.5d0d4c95.js.map