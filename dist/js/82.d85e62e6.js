"use strict";(self["webpackChunkjuridico_frontend"]=self["webpackChunkjuridico_frontend"]||[]).push([[82],{3223:function(a,t,e){e.r(t),e.d(t,{default:function(){return N}});var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"container fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12",staticStyle:{"margin-top":"20px"}},[e("b-form-group",{staticClass:"titulo m-0",attrs:{label:"Consulta de Feriados","label-size":"lg"}},[e("hr")])],1)]),e("notifications",{attrs:{notifications:a.Notificacao}}),a.alert?e("div",[e("ReturnMessage",{attrs:{message:a.Message,fechaAlert:a.fechaAlert}})],1):a._e(),a.loading?e("div",[e("LoadingSpinner")],1):a._e(),e("b-form",{staticClass:"mb-5",on:{submit:function(t){return t.preventDefault(),a.listarFeriados.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("b-form-group",{staticClass:"font",attrs:{label:"Data:"}},[e("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"}],staticClass:"bordered margin-field",attrs:{type:"text",placeholder:"dd/mm/aaaa"},model:{value:a.dataFeriadoBR,callback:function(t){a.dataFeriadoBR=t},expression:"dataFeriadoBR"}})],1)],1),e("div",{staticClass:"col-3"},[e("b-form-group",{staticClass:"font",attrs:{label:"Tipo:"}},[e("b-form-select",{model:{value:a.form.idTipoFeriado,callback:function(t){a.$set(a.form,"idTipoFeriado",t)},expression:"form.idTipoFeriado"}},[e("b-form-select-option",{attrs:{value:""}},[a._v("-- Selecione --")]),a._l(a.optionsTipoFeriado,(function(t){return e("b-form-select-option",{key:t.value,attrs:{value:t.value}},[a._v(" "+a._s(t.texto)+" ")])}))],2)],1)],1),e("div",{staticClass:"col-2"},[e("b-form-group",{staticClass:"font",attrs:{label:"Ano:"}},[e("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:"####",expression:"'####'"}],staticClass:"bordered margin-field",attrs:{type:"text",placeholder:"aaaa"},model:{value:a.form.ano,callback:function(t){a.$set(a.form,"ano",t)},expression:"form.ano"}})],1)],1),e("div",{staticClass:"col-2 justify-content-center"},[e("b-form-group",{staticClass:"font text-white",attrs:{label:"Consultar"}},[e("b-button",{staticClass:"h2",attrs:{type:"submit"}},[e("b-icon-search",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.topleft",value:"Consultar",expression:"'Consultar'",modifiers:{hover:!0,topleft:!0}}]})],1)],1)],1)])]),e("div",{staticClass:"card p-0 m-0"},[e("div",{staticClass:"card-header",attrs:{align:"right"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-1 text-blue h2 p0m0",attrs:{align:"center",label:"Feriados Cadastrados"}},[e("b-icon-journal-text")],1),a._m(0),e("div",{staticClass:"col-1 position-relative",attrs:{align:"center"}},[e("b-form-group",{staticClass:"btn text-primary position-absolute top-50 start-50 translate-middle",attrs:{label:""}},[e("div",{staticClass:"h3"},[e("b-icon-plus-circle",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-cadastro-feriado",modifiers:{"modal-cadastro-feriado":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover.topleft",value:"Adicionar Feriado",expression:"'Adicionar Feriado'",modifiers:{hover:!0,topleft:!0}}]})],1)])],1)])]),e("div",[e("b-table-lite",{staticClass:"m-0",attrs:{small:"",striped:"",hover:"","head-variant":"dark","current-page":a.currentPage,"per-page":a.perPage,"no-border-collapse":a.noCollapse,items:a.items,fields:a.fields},scopedSlots:a._u([{key:"cell(data_feriado)",fn:function(t){return[a._v(" "+a._s(a.formatarDataBr(t.item.data_feriado))+" ")]}},{key:"cell(botaoAction)",fn:function(t){return[e("b-dropdown",{staticClass:"p0m0",attrs:{variant:"dark",size:"sm"},scopedSlots:a._u([{key:"button-content",fn:function(){return[a._v(" ≡"),e("span",{staticClass:"sr-only"})]},proxy:!0}],null,!0)},[e("b-list-group-item",{staticClass:"btn-light btn-outline-dark m-0 p-1",attrs:{block:""},on:{click:function(e){return a.editarFeriado(t.item.id_feriado)}}},[a._v(" Editar ")]),e("b-list-group-item",{staticClass:"btn-light btn-outline-dark m-0 p-1",attrs:{block:""},on:{click:function(e){return a.visualizarFeriado(t.item.id_feriado)}}},[a._v(" Visualizar ")]),e("b-list-group-item",{staticClass:"btn-light text-dark btn-outline-danger m-0 p-1",attrs:{block:""},on:{click:function(e){return a.excluir(t.item.id_feriado,t.item.desc_feriado)}}},[a._v(" Excluir ")])],1)]}}])})],1),e("div",{staticClass:"card-footer m-0 px-1 pt-1"},[e("div",{staticClass:"col-12 m-0 px-1 pt-1"},[e("b-pagination",{directives:[{name:"show",rawName:"v-show",value:a.totalRows,expression:"totalRows"}],attrs:{pills:"",align:"right",size:"sm","total-rows":a.totalRows,"per-page":a.perPage},on:{change:a.listarFeriados},model:{value:a.currentPage,callback:function(t){a.currentPage=t},expression:"currentPage"}})],1)]),e("div",[a._v("  "),e("b",[a._v("Total Registros:")]),a._v(" "+a._s(a.totalRows))])]),e("b-modal",{attrs:{id:"modal-cadastro-feriado",centered:"",title:"Cadastro de Feriado","hide-footer":""}},[e("ModalCadastroFeriado",{on:{listarFeriados:function(t){return a.listarFeriados(a.currentPage)}},scopedSlots:a._u([{key:"buttons",fn:function(){return[e("b-button",{staticClass:"bordered",on:{click:function(t){return a.$bvModal.hide("modal-cadastro-feriado")}}},[a._v("Fechar")])]},proxy:!0}])})],1),e("b-modal",{attrs:{id:"modal-editar-feriado",centered:"",title:"Editar Feriado","hide-footer":""}},[e("ModalCadastroFeriado",{attrs:{tipo:"editar",id:a.idFeriado},on:{listarFeriados:function(t){return a.listarFeriados(a.currentPage)}},scopedSlots:a._u([{key:"buttons",fn:function(){return[e("b-button",{staticClass:"bordered",on:{click:function(t){return a.$bvModal.hide("modal-editar-feriado")}}},[a._v("Fechar")])]},proxy:!0}])})],1),e("b-modal",{attrs:{id:"modal-visualizar-feriado",centered:"",title:"Visualizar Feriado","hide-footer":""}},[e("ModalCadastroFeriado",{attrs:{tipo:"visualizar",id:a.idFeriado},scopedSlots:a._u([{key:"buttons",fn:function(){return[e("b-button",{staticClass:"bordered",on:{click:function(t){return a.$bvModal.hide("modal-visualizar-feriado")}}},[a._v("Fechar")])]},proxy:!0}])})],1)],1)},o=[function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"col-10 mt-1",attrs:{align:"start"}},[e("div",{staticClass:"row position-relative"},[e("h5",[a._v("Feriados Cadastrados")])])])}],s=e(8935),r=e(784),l=e(8161);const d=[{key:"botaoAction",label:"Ações",sortable:!1},{key:"data_feriado",label:"Data",sortable:!0},{key:"desc_feriado",label:"Descrição",sortable:!0},{key:"tipo_feriado",label:"Tipo",sortable:!0}];var n=e(7054),c=e(3126);const u=[{texto:"Fixo",value:"FIXO"},{texto:"Móvel",value:"MOVEL"}];var m=e(2210),f=e(9728),p=e(4753),h=e(3403),v=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("div",{staticClass:"col-12"},[e("b-form",{on:{submit:function(t){return t.preventDefault(),a.submit.apply(null,arguments)}}},[e("notifications",{attrs:{notifications:a.Notificacao}}),a.alert?e("div",[e("ReturnMessage",{attrs:{message:a.Message,fechaAlert:a.fechaAlert}})],1):a._e(),a.loading?e("div",[e("LoadingSpinner")],1):a._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("b-form-group",{staticClass:"font"},[e("label",[a._v("Data: "),e("span",{staticClass:"text-danger"},[a._v("*")])]),e("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"}],staticClass:"bordered margin-field",attrs:{type:"text",placeholder:"dd/mm/aaaa",disabled:a.disabledAll,required:""},model:{value:a.dataFeriadoBR,callback:function(t){a.dataFeriadoBR=t},expression:"dataFeriadoBR"}})],1)],1),e("div",{staticClass:"col-6"},[e("b-form-group",{staticClass:"font",attrs:{label:"Tipo:"}},[e("b-form-select",{attrs:{disabled:a.disabledAll},model:{value:a.form.tipoFeriado,callback:function(t){a.$set(a.form,"tipoFeriado",t)},expression:"form.tipoFeriado"}},[e("b-form-select-option",{attrs:{value:""}},[a._v("-- Selecione --")]),a._l(a.optionsTipoFeriado,(function(t){return e("b-form-select-option",{key:t.value,attrs:{value:t.value}},[a._v(" "+a._s(t.texto)+" ")])}))],2)],1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"row"},[e("b-form-group",{staticClass:"font col-sm-12 col-md-12 col-lg-12",attrs:{label:"Descrição:"}},[e("b-form-textarea",{attrs:{rows:"2","max-rows":"2",disabled:a.disabledAll},model:{value:a.form.descFeriado,callback:function(t){a.$set(a.form,"descFeriado",t)},expression:"form.descFeriado"}})],1)],1)])]),e("div",{staticClass:"py-2 mt-10",attrs:{align:"right"}},[a._t("buttons"),a.disabledAll?a._e():e("b-button",{staticClass:"bordered ml-2",attrs:{type:"submit",variant:"success"}},[a._v("Salvar")])],2)],1)],1)])},b=[],g=e(3248),C=s["default"].extend({directives:{mask:l.mask},components:{HeaderPage:r.Z,BIconSearch:n.Lln,BIconJournalPlus:n.Wf7,BIconPlusCircle:n.HON,BIconInfoCircle:n.gjx,Notifications:f.Z,ReturnMessage:p.Z,LoadingSpinner:h.Z,DetalhesProcesso:g.Z},mixins:[c.Z],props:["id","tipo"],data(){return{disabledAll:!1,show:!1,isLoading:!0,Notificacao:[],Message:[],loading:!1,alert:!1,form:{},carregarForm:{},dataFeriadoBR:"",optionsTipoFeriado:u}},mounted(){this.isLoading=!1,"editar"==this.tipo&&this.carregarDados(),"visualizar"==this.tipo&&(this.carregarDados(),this.disabledAll=!0)},methods:{submit(){let a=this.id?"put":"post",t="feriados";this.loading=!0,this.validarCampos()?(this.form.dataFeriado=this.dataFeriadoBR?c.Z.methods.dataFormatEn(this.dataFeriadoBR):"",console.log("JSON: ",JSON.stringify(this.form)),m.Z.salvar(t,this.form,a,this.form.id_feriado).then((t=>{"put"==a?this.adicionarAlert("success","Atualização realizada com sucesso!"):this.adicionarAlert("success","Cadastro realizado com sucesso!")})).catch((a=>{"Network Error"===a.message?this.adicionarAlert("alert","Sem conexão de rede. Verifique sua conexão!"):a&&a.response&&a.response.data&&a.response.data.message?this.adicionarAlert("alert",a.response.data.message):this.adicionarAlert("alert","Houve um erro ao salvar. Verifique o formulário e tente novamente!")})).finally((()=>{this.loading=!1}))):this.adicionarAlert("alert","Realize as validações exibidas no topo desta página!")},carregarDados(){this.loading=!0,m.Z.get("feriados/id",this.id).then((a=>{this.form.id_feriado=a.data.id_feriado,this.form.tipoFeriado=a.data.tipoFeriado,this.form.dataFeriado=a.data.data,this.form.descFeriado=a.data.descricao,this.dataFeriadoBR=a.data.data?c.Z.methods.formatarDataBr(a.data.data):""})).catch((a=>{this.adicionarAlert("alert","Houve um erro ao carregar os dados do feriado. Tente novamente!")})).finally((()=>{this.loading=!1}))},validarCampos(){return this.dataFeriadoBR||this.adicionarNotificacao("danger","Campo Data é obrigatório!"),this.form.tipoFeriado||this.adicionarNotificacao("danger","Campo Tipo é obrigatório!"),this.form.descFeriado||this.adicionarNotificacao("danger","Campo Descrição é obrigatório!"),this.dataFeriadoBR&&!c.Z.methods.validarData(this.dataFeriadoBR)&&this.adicionarNotificacao("danger","A data informada é inválida."),!(this.Notificacao.length>0)||(this.loading=!1,window.scrollTo(0,0),this.adicionarAlert("alert","Realize as validações exibidas no topo desta página!"),setTimeout((()=>{this.Notificacao=[]}),1e4),!1)},adicionarAlert(a,t){this.Message=[],this.Message.push({type:a,message:t}),this.alert=!0},adicionarNotificacao(a,t){this.Notificacao.push({type:a,message:t})},fechaAlert(){this.alert=!1,"success"==this.Message[0].type&&(this.$bvModal.hide("modal-cadastro-feriado"),this.$bvModal.hide("modal-editar-feriado"),this.$emit("listarFeriados"))}}}),F=C,x=e(1001),_=(0,x.Z)(F,v,b,!1,null,null,null),k=_.exports,w=s["default"].extend({directives:{mask:l.mask},components:{HeaderPage:r.Z,BIconSearch:n.Lln,BIconJournalText:n.kEx,BIconPlusCircle:n.HON,BIconInfoCircle:n.gjx,Notifications:f.Z,ReturnMessage:p.Z,LoadingSpinner:h.Z,ModalCadastroFeriado:k},mixins:[c.Z],data(){return{idFeriado:null,rows:100,currentPage:1,totalRows:1,perPage:5,pageOptions:[5,10,15,{value:100,text:"Show a lot"}],form:{},fields:d,stickyHeader:!0,noCollapse:!0,dataFeriadoBR:"",optionsTipoFeriado:u,items:[],Notificacao:[],Message:[],loading:!1,alert:!1}},mounted(){this.listarFeriados(this.currentPage)},methods:{editarFeriado(a){this.idFeriado=a,this.$bvModal.show("modal-editar-feriado")},visualizarFeriado(a){this.idFeriado=a,this.$bvModal.show("modal-visualizar-feriado")},listarFeriados(a){this.loading=!0;let t={};m.Z.post3("feriados/list",`?currentPage=${a}`,t).then((a=>{this.items=a.data.data,this.perPage=a.data.perPage,this.totalRows=a.data.total})).catch((a=>{"Network Error"===a.message?this.adicionarAlert("alert","Sem conexão de rede. Verifique sua conexão!"):a&&a.response&&a.response.data&&a.response.data.message?this.adicionarAlert("alert",a.response.data.message):this.adicionarAlert("alert","Houve um erro. Não foi possível carregar a listagem!")})).finally((()=>{this.loading=!1}))},validarCampos(){return this.dataFeriadoBR&&!c.Z.methods.validarData(this.dataFeriadoBR)&&this.adicionarNotificacao("danger","A data informada é inválida."),!(this.Notificacao.length>0)||(window.scrollTo(0,0),this.adicionarAlert("alert","Realize as validações exibidas no topo desta página!"),setTimeout((()=>{this.Notificacao=[]}),1e4),!1)},voltar(){this.$router.push("/")},excluir(a,t){let e="Deseja realmente excluir feriado de "+t+"?";confirm(e)&&m.Z["delete"]("feriados",a).then((a=>{this.loading=!0,this.adicionarAlert("success","Exclusão realizada com sucesso!"),this.listarFeriados(this.currentPage)})).catch((a=>{this.adicionarAlert("alert","Ocorreu um erro ao excluir registro!")})).finally((()=>{this.loading=!1}))},adicionarAlert(a,t){this.Message=[],this.Message.push({type:a,message:t}),this.alert=!0},adicionarNotificacao(a,t){this.Notificacao.push({type:a,message:t})},fechaAlert(){this.alert=!1}}}),y=w,A=(0,x.Z)(y,i,o,!1,null,null,null),N=A.exports}}]);
//# sourceMappingURL=82.d85e62e6.js.map