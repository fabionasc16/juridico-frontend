"use strict";(self["webpackChunkjuridico_frontend"]=self["webpackChunkjuridico_frontend"]||[]).push([[170],{9933:function(a,t,o){o.r(t),o.d(t,{default:function(){return w}});var e=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("div",{staticClass:"container fluid"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12",staticStyle:{"margin-top":"20px"}},[o("b-form-group",{staticClass:"titulo m-0",attrs:{label:"Consulta de Órgão Demandante","label-size":"lg"}},[o("hr")])],1)]),o("notifications",{attrs:{notifications:a.Notificacao}}),a.alert?o("div",[o("ReturnMessage",{attrs:{message:a.Message,fechaAlert:a.fechaAlert}})],1):a._e(),a.loading?o("div",[o("LoadingSpinner")],1):a._e(),o("b-form",{staticClass:"mb-5",on:{submit:function(t){return t.preventDefault(),a.submit.apply(null,arguments)}}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-4"},[o("b-form-group",{staticClass:"font",attrs:{label:"Nome:"}},[o("b-form-input",{attrs:{placeholder:"Digite Nome do Órgão Demandante",type:"text"},model:{value:a.form.orgaoDemandante,callback:function(t){a.$set(a.form,"orgaoDemandante",t)},expression:"form.orgaoDemandante"}})],1)],1),o("div",{staticClass:"col-2 justify-content-center"},[o("b-form-group",{staticClass:"font text-white",attrs:{label:"Consultar"}},[o("b-button",{staticClass:"h2",attrs:{type:"submit"}},[o("b-icon-search",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.topleft",value:"Consultar",expression:"'Consultar'",modifiers:{hover:!0,topleft:!0}}]})],1)],1)],1)])]),o("div",{staticClass:"card p-0 m-0"},[o("div",{staticClass:"card-header",attrs:{align:"right"}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-1 text-blue h2 p0m0",attrs:{align:"center",label:"Responsáveis Cadastrados"}},[o("b-icon-journal-text")],1),a._m(0),o("div",{staticClass:"col-1 position-relative",attrs:{align:"center"}},[o("b-form-group",{staticClass:"btn text-primary position-absolute top-50 start-50 translate-middle",attrs:{label:""}},[o("div",{staticClass:"h3"},[o("b-icon-plus-circle",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-cadastro-orgao",modifiers:{"modal-cadastro-orgao":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover.topleft",value:"Adicionar Órgão",expression:"'Adicionar Órgão'",modifiers:{hover:!0,topleft:!0}}]})],1)])],1)])]),o("div",[o("b-table-lite",{staticClass:"m-0",attrs:{small:"",striped:"",hover:"","head-variant":"dark","current-page":a.currentPage,"per-page":a.perPage,"no-border-collapse":a.noCollapse,items:a.items,fields:a.fields},scopedSlots:a._u([{key:"cell(botaoAction)",fn:function(t){return[o("b-dropdown",{staticClass:"p0m0",attrs:{variant:"dark",size:"sm"},scopedSlots:a._u([{key:"button-content",fn:function(){return[a._v(" ≡"),o("span",{staticClass:"sr-only"})]},proxy:!0}],null,!0)},[o("b-list-group-item",{staticClass:"btn-light btn-outline-dark m-0 p-1",attrs:{block:""},on:{click:function(o){return a.editarOrgao(t.item.id_orgao)}}},[a._v(" Editar ")]),o("b-list-group-item",{staticClass:"btn-light btn-outline-dark m-0 p-1",attrs:{block:""},on:{click:function(o){return a.visualizarOrgao(t.item.id_orgao)}}},[a._v(" Visualizar ")]),o("b-list-group-item",{staticClass:"btn-light text-dark btn-outline-danger m-0 p-1",attrs:{block:""},on:{click:function(o){return a.excluir(t.item.id_orgao,t.item.orgao_demandante)}}},[a._v(" Excluir ")])],1)]}}])})],1),o("div",{staticClass:"card-footer m-0 px-1 pt-1"},[o("div",{staticClass:"col-12 m-0 px-1 pt-1"},[o("b-pagination",{directives:[{name:"show",rawName:"v-show",value:a.totalRows,expression:"totalRows"}],attrs:{pills:"",align:"right",size:"sm","total-rows":a.totalRows,"per-page":a.perPage},on:{change:a.listarOrgaos},model:{value:a.currentPage,callback:function(t){a.currentPage=t},expression:"currentPage"}})],1)]),o("div",[a._v("  "),o("b",[a._v("Total Registros:")]),a._v(" "+a._s(a.totalRows))])]),o("b-modal",{attrs:{id:"modal-cadastro-orgao",size:"lg",centered:"",title:"Cadastro do Órgão Demandante","hide-footer":""}},[o("ModalCadastroOrgao",{attrs:{tipo:"cadastrar"},on:{listarOrgaos:function(t){return a.listarOrgaos(a.currentPage)}},scopedSlots:a._u([{key:"buttons",fn:function(){return[o("b-button",{staticClass:"bordered",on:{click:function(t){return a.$bvModal.hide("modal-cadastro-orgao")}}},[a._v("Fechar")])]},proxy:!0}])})],1),o("b-modal",{attrs:{id:"modal-editar-orgao",size:"lg",centered:"",title:"Editar Órgão Demandante","hide-footer":""}},[o("ModalCadastroOrgao",{attrs:{tipo:"editar",id:a.idOrgao},on:{listarOrgaos:function(t){return a.listarOrgaos(a.currentPage)}},scopedSlots:a._u([{key:"buttons",fn:function(){return[o("b-button",{staticClass:"bordered",on:{click:function(t){return a.$bvModal.hide("modal-editar-orgao")}}},[a._v("Fechar")])]},proxy:!0}])})],1),o("b-modal",{attrs:{id:"modal-visualizar-orgao",size:"lg",centered:"",title:"Visualizar Órgão Demandante","hide-footer":""}},[o("ModalCadastroOrgao",{attrs:{tipo:"visualizar",id:a.idOrgao},scopedSlots:a._u([{key:"buttons",fn:function(){return[o("b-button",{staticClass:"bordered",on:{click:function(t){return a.$bvModal.hide("modal-visualizar-orgao")}}},[a._v("Fechar")])]},proxy:!0}])})],1)],1)},s=[function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("div",{staticClass:"col-10 mt-1",attrs:{align:"start"}},[o("div",{staticClass:"row position-relative"},[o("h5",[a._v("Órgãos Cadastrados")])])])}],r=o(8935),i=o(784),l=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("div",[o("div",{staticClass:"card"},[o("div",{staticClass:"col-12"},[o("notifications",{attrs:{notifications:a.Notificacao}}),a.alert?o("div",[o("ReturnMessage",{attrs:{message:a.Message,fechaAlert:a.fechaAlert}})],1):a._e(),a.loading?o("div",[o("LoadingSpinner")],1):a._e(),o("b-form",{on:{submit:function(t){return t.preventDefault(),a.submit.apply(null,arguments)}}},[o("div",{staticClass:"row mt-3"},[o("b-form-group",{staticClass:"font col-sm-10 col-md-10 col-lg-10"},[o("label",[a._v("Nome"),o("span",{staticClass:"text-danger"},[a._v("*")]),a._v(":")]),o("b-form-input",{attrs:{placeholder:"Digite o Nome do Órgão",type:"text",autofocus:"",disabled:a.disabledAll,required:""},model:{value:a.form.orgaoDemandante,callback:function(t){a.$set(a.form,"orgaoDemandante",t)},expression:"form.orgaoDemandante"}})],1)],1),o("div",{staticClass:"row"},[o("b-form-group",{staticClass:"font col-sm-5 col-md-5 col-lg-5"},[o("label",[a._v("Sigla"),o("span",{staticClass:"text-danger"},[a._v("*")]),a._v(":")]),o("b-form-input",{attrs:{type:"text",disabled:a.disabledAll,required:""},model:{value:a.form.siglaOrgao,callback:function(t){a.$set(a.form,"siglaOrgao",t)},expression:"form.siglaOrgao"}})],1),o("b-form-group",{staticClass:"font col-sm-5 col-md-5 col-lg-5"},[o("label",[a._v("Esfera"),o("span",{staticClass:"text-danger"},[a._v("*")]),a._v(":")]),o("b-form-input",{attrs:{type:"text",disabled:a.disabledAll,required:""},model:{value:a.form.esferaOrgao,callback:function(t){a.$set(a.form,"esferaOrgao",t)},expression:"form.esferaOrgao"}})],1)],1),o("div",{staticClass:"row"},[o("b-form-group",{staticClass:"font col-sm-6 col-md-6 col-lg-6"},[o("b-form-checkbox",{staticClass:"font col-sm-12 col-md-12 col-lg-12",attrs:{switch:"",disabled:a.disabledAll},model:{value:a.form.orgaoControle,callback:function(t){a.$set(a.form,"orgaoControle",t)},expression:"form.orgaoControle"}},[a._v("Órgão de Controle? ")])],1)],1),o("div",{staticClass:"row"},[o("b-form-group",{staticClass:"font col-sm-6 col-md-6 col-lg-6"},[o("b-form-checkbox",{staticClass:"font col-sm-12 col-md-12 col-lg-12",attrs:{switch:"",disabled:a.disabledAll},model:{value:a.form.orgaoJustica,callback:function(t){a.$set(a.form,"orgaoJustica",t)},expression:"form.orgaoJustica"}},[a._v("Órgão de Justiça? ")])],1)],1),o("div",{staticClass:"py-2 mt-10",attrs:{align:"right"}},[a._t("buttons"),a.disabledAll?a._e():o("b-button",{staticClass:"bordered ml-2",attrs:{type:"submit",variant:"success"}},[a._v("Salvar")])],2)])],1)])])},n=[],c=o(8161),d=o(9728),g=o(7054),u=o(4753),m=o(2210),f=o(3403),h=o(355),p=r["default"].extend({directives:{mask:c.mask},mixins:[h.Z],components:{HeaderPage:i.Z,BIconSearch:g.Lln,BIconJournalPlus:g.Wf7,BIconPlusCircle:g.HON,BIconInfoCircle:g.gjx,Notifications:d.Z,ReturnMessage:u.Z,LoadingSpinner:f.Z},props:["id","tipo"],data(){return{disabledAll:!1,rows:100,currentPage:1,stickyHeader:!0,noCollapse:!0,show:!1,form:{},Notificacao:[],Message:[],loading:!1,alert:!1,isLoading:!1}},mounted(){this.isLoading=!1,"editar"==this.tipo&&this.carregarDados(),"visualizar"==this.tipo&&(this.carregarDados(),this.disabledAll=!0)},methods:{submit(){let a=this.id?"put":"post",t="orgaos-demandantes";this.validarCampos()?(console.log("JSON: ",JSON.stringify(this.form)),this.loading=!0,this.form.orgaoControle=this.form.orgaoControle?"S":"N",this.form.orgaoJustica=this.form.orgaoJustica?"S":"N",m.Z.salvar(t,this.form,a,this.form.idOrgao).then((t=>{"put"==a?this.adicionarAlert("success","Atualização realizada com sucesso!"):this.adicionarAlert("success","Cadastro realizado com sucesso!")})).catch((a=>{"Network Error"===a.message?this.adicionarAlert("alert","Sem conexão de rede. Verifique sua conexão!"):a&&a.response&&a.response.data&&a.response.data.message?this.adicionarAlert("alert",a.response.data.message):this.adicionarAlert("alert","Houve um erro ao salvar. Verifique o formulário e tente novamente!")})).finally((()=>{this.loading=!1}))):this.adicionarAlert("alert","Realize as validações exibidas no topo desta página!")},carregarDados(){this.loading=!0,m.Z.get("orgaos-demandantes/id",this.id).then((a=>{this.form.idOrgao=a.data.id_orgao,this.form.orgaoDemandante=a.data.orgao_demandante,this.form.siglaOrgao=a.data.sigla_orgao,this.form.esferaOrgao=a.data.esfera_orgao,this.form.orgaoControle="S"==a.data.orgao_controle,this.form.orgaoJustica="S"==a.data.orgao_justica})).catch((a=>{this.adicionarAlert("alert","Houve um erro ao carregar os dados. Tente novamente!")})).finally((()=>{this.loading=!1}))},validarCampos(){return this.Notificacao=[],this.form.orgaoDemandante||this.adicionarNotificacao("danger","Campo Nome é obrigatório!"),this.form.siglaOrgao||this.adicionarNotificacao("danger","Campo Sigla é obrigatório!"),this.form.esferaOrgao||this.adicionarNotificacao("danger","Campo Esfera é obrigatório!"),!(this.Notificacao.length>0)||(window.scrollTo(0,0),this.adicionarAlert("alert","Realize as validações exibidas no topo desta página!"),setTimeout((()=>{this.Notificacao=[]}),5e3),!1)},adicionarAlert(a,t){this.Message=[],this.Message.push({type:a,message:t}),this.alert=!0},adicionarNotificacao(a,t){this.Notificacao.push({type:a,message:t})},fechaAlert(){this.alert=!1,"success"==this.Message[0].type&&(this.$bvModal.hide("modal-cadastro-orgao"),this.$bvModal.hide("modal-editar-orgao"),this.$emit("listarOrgaos"))}}}),b=p,v=o(1001),C=(0,v.Z)(b,l,n,!1,null,null,null),_=C.exports;const x=[{key:"botaoAction",label:"Ações",sortable:!1},{key:"orgao_demandante",label:"Órgão Demandante",sortable:!0},{key:"esfera_orgao",label:"Esfera",sortable:!0}];var k=r["default"].extend({directives:{mask:c.mask},components:{HeaderPage:i.Z,BIconSearch:g.Lln,BIconJournalText:g.kEx,BIconPlusCircle:g.HON,BIconInfoCircle:g.gjx,Notifications:d.Z,ModalCadastroOrgao:_,ReturnMessage:u.Z,LoadingSpinner:f.Z},data(){return{idOrgao:null,rows:100,currentPage:1,totalRows:null,perPage:10,items:[],pageOptions:[5,10,15,{value:100,text:"Show a lot"}],form:{},fields:x,stickyHeader:!0,noCollapse:!0,Notificacao:[],Message:[],loading:!1,alert:!1}},mounted(){this.listarOrgaos(this.currentPage)},methods:{submit(){alert("pesquisar"),console.log(JSON.stringify(this.form))},editarOrgao(a){this.idOrgao=a,this.$bvModal.show("modal-editar-orgao")},visualizarOrgao(a){this.idOrgao=a,this.$bvModal.show("modal-visualizar-orgao")},listarOrgaos(a){this.loading=!0,m.Z.get("orgaos-demandantes",`?currentPage=${a}`).then((a=>{this.items=a.data.data,this.perPage=a.data.perPage,this.totalRows=a.data.total})).catch((a=>(console.log(a),this.adicionarNotificacao("danger","Não foi possível carregar a listagem!"),!1))).finally((()=>{this.loading=!1}))},voltar(){this.$router.push("/")},excluir(a,t){let o="Deseja realmente excluir órgão demandante "+t+"?";confirm(o)&&m.Z["delete"]("orgaos-demandantes",a).then((a=>{this.loading=!0,this.adicionarAlert("success","Exclusão realizada com sucesso!"),this.listarOrgaos(this.currentPage)})).catch((a=>{this.adicionarAlert("alert","Ocorreu um erro ao excluir registro!")})).finally((()=>{this.loading=!1}))},adicionarAlert(a,t){this.Message=[],this.Message.push({type:a,message:t}),this.alert=!0},adicionarNotificacao(a,t){this.Notificacao.push({type:a,message:t})},fechaAlert(){this.alert=!1}}}),O=k,y=(0,v.Z)(O,e,s,!1,null,null,null),w=y.exports},355:function(a,t){const o={methods:{validarCpf(a){if("string"!=typeof a)return!1;if(a=a.replace(/[^\d]+/g,""),""==a)return!1;if(11!=a.length||"00000000000"==a||"11111111111"==a||"22222222222"==a||"33333333333"==a||"44444444444"==a||"55555555555"==a||"66666666666"==a||"77777777777"==a||"88888888888"==a||"99999999999"==a)return!1;let t=0;for(let e=0;e<9;e++)t+=parseInt(a.charAt(e))*(10-e);let o=11-t%11;if(10!=o&&11!=o||(o=0),o!=parseInt(a.charAt(9)))return!1;t=0;for(let e=0;e<10;e++)t+=parseInt(a.charAt(e))*(11-e);return o=11-t%11,10!=o&&11!=o||(o=0),o==parseInt(a.charAt(10))}}};t["Z"]=o}}]);
//# sourceMappingURL=170.daafdd13.js.map